{"version":3,"sources":["imbox.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"imbox.min.js","sourcesContent":["var ImBox = function(params){\n\n\tvar container = params.container;\n\tvar images = params.images;\n\tvar frames = [];\n\tvar currentFrame = params.currentFrame || 0;\n\tvar speed = params.speed || 400;\n\tvar closeButton = params.closeButton;\n\tvar zoomOnClick = params.zoomOnClick;\n\tvar imagesIsThumbnails = params.imagesIsThumbnails;\n\n\tvar _blockActionTimeOut;\n\n\n\tfunction Div(parent,styles)\n\t{\n\t\tvar el = parent.appendChild(document.createElement('div'));\n\t\tfor (var n in styles)\n\t\t{\n\t\t\tif (!styles.hasOwnProperty(n)) continue;\n\t\t\tel.style[n] = styles[n];\n\t\t}\n\t\treturn el;\n\t}\n\n\tfunction toggleClass(el,name)\n\t{\n\t\tif (el && el.className)\n\t\t\tswitch(el.className)\n\t\t\t{\n\t\t\t\tcase '':\n\t\t\t\t\tel.className = name;\n\t\t\t\t\tbreak;\n\t\t\t\tcase name:\n\t\t\t\t\tel.className = '';\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tvar rg = new RegExp('(^'+name+'[ ]+|[ ]+'+name+'[ ]+|[ ]+'+name+')','g');\n\t\t\t\t\tvar tmp = el.className.replace(rg,'');\n\t\t\t\t\tif (tmp == el.className)\n\t\t\t\t\t\tel.className += ' '+name;\n\t\t\t\t\telse\n\t\t\t\t\t\tel.className = tmp;\n\t\t\t}\n\t}\n\n\tfunction setClasses()\n\t{\n\t\tfor (var n = parseInt(frames.length/2); n > 0; n--)\n\t\t{\n\t\t\tvar left = currentFrame-n;\n\t\t\tvar rigth = (currentFrame+n) % frames.length;\n\t\t\tframes.slice(left)[0].className = 'left';\n\t\t\tframes.slice(rigth)[0].className = 'right';\n\t\t}\n\t\tframes[currentFrame].className = 'center';\n\t};\n\n\tfunction moveTo(n)\n\t{\n\t\tif (_blockActionTimeOut) return;\n\t\tsetTimeout(function(){\n\t\t\tsetClasses();\n\t\t\t_blockActionTimeOut=false\n\t\t},speed);\n\t\t_blockActionTimeOut = true;\n\n\t\tframes[currentFrame].className = 'oldcenter';\n\n\t\tif (imagesIsThumbnails)\n\t\t\ttoggleClass(images[currentFrame],'active');\n\n\t\tcurrentFrame = n > (frames.length-1) ? n % (frames.length) : n;\n\n\t\tframes[currentFrame].className = 'center';\n\n\t\tif (imagesIsThumbnails)\n\t\t\ttoggleClass(images[currentFrame],'active');\n\t};\n\n\tfunction prev()\n\t{\n\t\treturn currentFrame+1 === frames.length ? 0 : currentFrame+1;\n\t}\n\tfunction next()\n\t{\n\t\treturn currentFrame===0 ? frames.length-1 : currentFrame-1;\n\t}\n\n\t//actions\n\tvar toLeft = function()\n\t{\n\t\tmoveTo(next());\n\t}\n\tvar toRight = function()\n\t{\n\t\tmoveTo(prev());\n\t}\n\n\tvar close = function()\n\t{\n\t\tif (params.container)\n\t\t\tcontainer.innerHTML = '';\n\t\telse\n\t\t{\n\t\t\tcontainer.parentNode.removeChild(container);\n\t\t\twindow.removeEventListener('keyup',keyboardEvents);\n\t\t}\n\t}\n\tvar keyboardEvents = function(event)\n\t{\n\t\tevent = event || window.event;\n\t\tif (event.keyCode == 27 && ImBox.zoomBox) //esc with zoomBox\n\t\t{\n\t\t\tImBox.zoomBox.close();\n\t\t\tdelete ImBox.zoomBox;\n\t\t}\n\t}\n\n\tif (!images || !images.length)\n\t{\n\t\treturn false;\n\t}\n\n\n\t//initialize container\n\tif (container)\n\t{\n\t\tcontainer.innerHTML = '';\n\t}\n\telse\n\t{\n\t\tcontainer = new Div(document.body);\n\t}\n\n\tcontainer.className = 'imBox-container';\n\tif (params.containerClass)\n\t\tcontainer.className += ' '+params.containerClass;\n\n\tif (zoomOnClick)\n\t{\n\t\tcontainer.className += ' zoomOnClick';\n\t}\n\n\n\t//initialize frames\n\tfor (var n in images)\n\t{\n\t\tif (!images.hasOwnProperty(n)) continue;\n\n\t\tvar src = images[n];\n\t\tif (images[n] instanceof HTMLElement)\n\t\t{\n\t\t\tsrc = images[n].getAttribute('data-imboxsrc') || images[n].src;\n\t\t\tconsole.log(images[n]);\n\t\t\tif (imagesIsThumbnails)\n\t\t\t{\n\t\t\t\timages[n].addEventListener('click',\n\t\t\t\t\t(function(x){\n\t\t\t\t\t\treturn function(){\n\t\t\t\t\t\t\tmoveTo(+x);\n\t\t\t\t\t\t};\n\t\t\t\t\t})(n)\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\tvar styles = {\n\t\t\tbackgroundImage:'url('+src+')',\n\t\t\ttransition: 'left '+(speed/1000)+'s'\n\t\t};\n\t\t//styles='';\n\t\tvar frame = new Div(container, styles);\n\t\tframes.push(frame);\n\t}\n\n\n\tif (zoomOnClick)\n\t{\n\t\t//create enlarged ImBox\n\t\tcontainer.onclick = function(e){\n\t\t\tif (e.target == frames[currentFrame])\n\t\t\t{\n\t\t\t\tImBox.zoomBox = new ImBox({\n\t\t\t\t\timages:images,\n\t\t\t\t\tcurrentFrame:currentFrame,\n\t\t\t\t\tcloseButton:true,\n\t\t\t\t\tcontainerClass:'enlarged'\n\t\t\t\t});\n\t\t\t\twindow.addEventListener('keyup',keyboardEvents);\n\t\t\t}\n\t\t};\n\t}\n\n\n\t//initialize controls\n\tif (images.length > 1)\n\t{\n\t\tvar leftArrow = new Div(container);\n\t\tleftArrow.className = 'left-arrow';\n\t\tleftArrow.onclick = toLeft;\n\n\t\tvar rightArrow = new Div(container);\n\t\trightArrow.className = 'right-arrow';\n\t\trightArrow.onclick = toRight;\n\t}\n\n\tif (closeButton)\n\t{\n\t\tcloseButton = new Div(container);\n\t\tcloseButton.className = 'close-button';\n\t\tcloseButton.onclick = close;\n\t}\n\n\tsetClasses();\n\tif (imagesIsThumbnails)\n\t\ttoggleClass(images[currentFrame],'active');\n\n\t//public methods\n\treturn {\n\t\ttoLeft:toLeft\n\t\t,toRight:toRight\n\t\t,close:close\n\t\t,moveTo:moveTo\n\t\t,keyboardEvents:keyboardEvents\n\t}\n\n\n}\n\n/*\nvar params = {\n\tcontainer:document.querySelector('.ImBox-container'),\n\timages:document.querySelectorAll('#contentContainer>img'),\n\timagesIsThumbnails:true,\n\tcloseButton:false,\n\tzoomOnClick:true\n};\nvar box = new ImBox(params);\nvar n = 25;\n//setInterval(function(){box.moveTo(n++)},1000);\n//setInterval(box.close,10000);\n*/"],"sourceRoot":"/source/"}